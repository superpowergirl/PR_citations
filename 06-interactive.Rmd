# Interactive component

##Nobel prize winners and their most cited papers
In this section, we take a look at a few of the nobel prize winners in the field of physics between the years 1990 and 2010. More specifically, we take a look at their most cited physical review journal paper (based on the number of citations it has received from other physical review journal papers), and see how has the paper's citations evolved with time since it was first cited.   
Please use the interactive graph below to choose a nobel prize winning author to look at the time series.  

<script src="https://d3js.org/d3.v6.js"></script>
<style type ="text/css">
      .line {
        fill: none;
        stroke: blue;
        stroke-width: 1.5px;
      }
</style>



  <h2>Nobel Prize winners and their most cited physical review journal papers</h2>
  <p>Select a winner from the dropdown to see the time series of citations received on their most cited paper</p>
  <select id="selectButton"></select>

<div id="nobel"></div>

  <script>
  var w = 1000;
  var h = 500;
  var margin = {top: 25, right: 25, bottom: 50, left: 50};
  var innerWidth = w - margin.left - margin.right;
  var innerHeight = h - margin.top - margin.bottom;

  var svg = d3.select("div#nobel") // append svg to div
    .append("svg")
      .attr("width", w)
      .attr("height", h);
  svg.append("rect")
      .attr("x", 0)
      .attr("y", 0)
      .attr("width", w)
      .attr("height", h)
      .attr("fill", "aliceblue");

  var authors = [];

  d3.csv("https://raw.githubusercontent.com/akp21/EDAV_CC20/main/nobelauthor_timeseries.csv").then(function(data)  {

    console.log(data)
    var author_names = data.map(function(d) { return d.nobel_author; });
    console.log(author_names)
    var author_name_set = new Set(author_names)
    var author_name_unique = Array.from(author_name_set)
    console.log(author_name_unique)
    d3.select("#selectButton")
      .selectAll('authoroptions')
      .data(author_name_unique)
      .enter()
      .append('option')
      .text(function (d) {return d;})
      .attr("value", function (d) {return d;})
      .property("selected", function(d){return d === "Select a nobel prize winner"})


  var xScale = d3.scaleLinear()
      .domain([d3.min(data, function(d) {return +d.cited_year;}),d3.max(data, function(d) {return +d.cited_year;})])   // convert to numeric with "+"
      .range([0, innerWidth]);
    console.log(xScale.domain());

    var yScale = d3.scaleLinear()
      .domain([0, d3.max(data, function(d) {return +d.n;})]) // convert to numeric
      .range([innerHeight, 0]);

    var xAxis = d3.axisBottom()
      .scale(xScale).tickFormat(d3.format("d"));

    var yAxis = d3.axisLeft()
      .scale(yScale);

  svg.append("g")
      .attr("class", "xAxis")
      .attr("transform", `translate (${margin.left}, ${h - margin.bottom})`)
      .call(xAxis);

  svg.append("g")
      .attr("class", "yAxis")
      .attr("transform", `translate (${margin.left}, ${margin.top})`)
      .call(yAxis);

// x-axis label
  svg.append("text")
      .attr("transform",
            "translate(" + (innerWidth/2) + " ," +
                           (innerHeight + margin.top + 35) + ")")
      .style("text-anchor", "middle")
      .text("Year of citations received");

// y-axis label
 svg.append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 0- margin.left +50)
      .attr("x",0 - (innerHeight / 2))
      .attr("dy", "1em")
      .style("text-anchor", "middle")
      .text("Number of citations received");

// create initial items

d3.select("svg")
  .append("g")
  .attr("id", "plot")
  .attr("transform", `translate (${margin.left}, ${margin.top})`);

d3.select("g#plot")
  .append("path");

d3.select("g#plot")
   .append("line");

d3.select("g#plot")
   .append("line")
   .attr("id","line1");
d3.select("g#plot")
   .append("line")
   .attr("id","line2");

d3.select("g#plot")
  .append("text")
  .attr("id","text1");
d3.select("g#plot")
  .append("text")
  .attr("id","text2");

function updatePlot(selectedauthor) {

    function getFilteredData(data, nobel_author) {
	return data.filter(function(d) { return d.nobel_author === selectedauthor; });
}
    //var dataFilter = data.map(function(d){return {author_name:selectedauthor, value:d.avg_cit_before} })

  var dataFilter = getFilteredData(data,selectedauthor)
  console.log(dataFilter)

   var line_gen = d3.line()
          .x(d=> xScale(d.cited_year))
          .y(d=> yScale(d.n));
    var nobel_year = d3.max(dataFilter, function(d) {return d.nobel_year;})
    
    var max_cited_year=d3.max(dataFilter, function(d) {return d.cited_year;})
    var paper_name=d3.max(dataFilter, function(d) {return d.cited_doi;})
//vertical line
  svg.select("g#plot")
    .select("line")
    .attr("x1", xScale(nobel_year))
    .attr("y1", 0)
    .attr("x2", xScale(nobel_year))
    .attr("y2", h - margin.bottom-20)
    .style("stroke-width", 2)
    .style("stroke", "red")
    .style("fill", "none");

// line chart
    svg.select("g#plot")
      .select("path")
        .datum(dataFilter)
        .attr("d", line_gen)
        .attr("class", "line");
    
    svg.select("g#plot")
    .select("#line1")
    .attr("x1", 800)
    .attr("y1", 100)
    .attr("x2", 820)
    .attr("y2", 100)
    .style("stroke-width", 2)
    .style("stroke", "red")
    .style("fill", "none");
    
    svg.select("g#plot")
    .select("#line2")
    .attr("x1", 800)
    .attr("y1", 120)
    .attr("x2", 820)
    .attr("y2", 120)
    .style("stroke-width", 2)
    .style("stroke", "blue")
    .style("fill", "none");
    
    svg.select("g#plot")
      .select("#text1")
      .attr("x", 820)
      .attr("y", 100)
      .text("Nobel prize year")
      .style("font-size", "15px")
      .attr("alignment-baseline","middle")
    svg.select("g#plot")
      .select("#text2")
      .attr("x", 820)
      .attr("y", 120)
      .text("Citations time series")
      .style("font-size", "15px")
      .attr("alignment-baseline","middle")
  }
    d3.select("#selectButton").on("change", function(d) {
        // recover the option that has been chosen
        var selectedOption = d3.select(this).property("value")
        console.log(selectedOption)
        // run the updateChart function with this selected option
        updatePlot(selectedOption)
  })

  });

    </script>

  </body>

</html>


As you can see, for these subset of authors that won the Nobel prize in Physics between 1990 and 2009, the time series has interesting peaks and troughs, and the nobel prize year forms more or less a good boundary point to distinguish the activity on these papers. However, we cannot use this data to conclusively say anything about the effect of nobel prize on citations and also vice-versa.  
As we mentioned in our introduction, highly cited papers are almost rarely famous papers by famous authors. And we observe that phenomenon in case of many nobel prize authors.

Below graph shows the time series lines for each of the authors in the dropdown above plotted in the same graph.  

